### 一、本周学习

1. **完成本地开发环境部署**

   - **后端**：
     - JDK 1.8（验证命令：`java -version`）
     - MySQL 8.0（创建数据库`ry-vue`并执行`sql/ry_2023xxxx.sql`和`quartz.sql`）
     - Redis 6.2（需修改`ruoyi-admin/src/main/resources/application.yml`中的Redis配置）
     - 启动后端：`RuoyiAdminApplication`主类，默认端口8080
   - **前端**：
     - Node.js 16.14.0 + npm 8.3.1
     - 依赖安装：`npm install --registry=https://registry.npmmirror.com`（解决国内镜像问题）
     - 启动命令：`npm run dev`，访问`http://localhost:80`

2. **深入理解权限控制流程**

   - **关键代码分析**：

     java

     ```
     // 权限注解示例（Shiro）
     @RequiresPermissions("system:user:list")
     @GetMapping("/list")
     public TableDataInfo list(SysUser user) {
         // 业务逻辑
     }
     ```

     - 权限字符串格式：`模块:子模块:操作`，与数据库`sys_menu`表中的`perms`字段对应。

   - **前端权限控制**：

     - 通过`src/store/modules/permission.js`动态生成路由，过滤`roles`属性匹配的菜单。

 3.代码生成器实战

- **步骤**：

  1. 在MySQL中创建表（如`test_student`）
  2. 进入系统工具 → 代码生成 → 导入表 → 编辑生成配置
  3. 生成ZIP包并解压到对应模块（后端Java代码放入`ruoyi-admin`，前端Vue文件放入`src/views`）

- **关键配置**：

  xml

  ```
  <!-- 代码生成模板路径 -->
  <property name="templates" value="/template/vue" />
  ```

#### 4. 前后端交互流程

前端（`src/api/login.js`）：

javascript

```
export function login(username, password, code, uuid) {
  return request({
    url: '/auth/login',
    method: 'post',
    data: { username, password, code, uuid }
  })
}
```

后端（`RuoyiAdminApplication`）：

- 请求路径：`/auth/login` → `SysLoginController`

- 认证流程：

  java

  ```
  String token = loginService.login(username, password, code, uuid);
  // 调用Shiro的Subject.login()
  ```

#### 5. 动态路由实现

后端接口：`/getRouters`（返回JSON格式菜单树）

前端处理（`permission.js`）：

javascript

```
const res = await getRouters()
const sdata = JSON.parse(JSON.stringify(res.data))
const rdata = JSON.parse(JSON.stringify(res.data))
const defaultData = await formatRoutes(sdata) // 格式化路由
```

#### 6. 异常处理机制

全局异常处理器（`GlobalExceptionHandler.java`）：

java

```
@ExceptionHandler(DemoModeException.class)
public AjaxResult handleDemoModeException(DemoModeException e) {
  return AjaxResult.error("演示模式，不允许操作");
}
```

### 二、结果

1. 成功在本地运行若依前后端项目，并登录系统。
2. 通过代码生成器创建了一个简单的业务模块（如“学生管理”）。
3. 阅读了部分核心源码（如权限拦截逻辑、动态路由加载）。